{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\n\nconst API_KEY = '47639623-264b1095d84da06504953512f';\n\nasync function getImg(searchValue, page = 1) {\n  const searchParams = {\n    key: API_KEY,\n    q: searchValue,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    page: page,\n    per_page: 15,\n  };\n\n  const url = 'https://pixabay.com/api/';\n\n  try {\n    const res = await axios.get(url, { params: searchParams });\n\n    if (!res.data.hits || res.data.hits.length === 0) {\n      throw new Error('No images found for the query.');\n    }\n\n    return res.data;\n  } catch (error) {\n    console.error('Error fetching images:', error.message);\n    throw error;\n  }\n}\n\nexport { getImg };\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet galleryLightbox;\n\nfunction createCardsMarkup(cards) {\n  const cartItem = cards\n    .map(\n      ({\n        tags,\n        webformatURL,\n        largeImageURL,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n      <li class=\"gallery-card\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-img\" src=\"${webformatURL}\" alt=\"${tags}\" />\n            <div class=\"values-container\">\n                <ul class=\"labels\">\n                    <li>Likes</li>\n                    <li>${likes}</li>\n                </ul>\n                <ul class=\"labels\">\n                    <li>Views</li>\n                    <li>${views}</li>\n                </ul>\n                <ul class=\"labels\">\n                    <li>Comments</li>\n                    <li>${comments}</li>\n                </ul>\n                <ul class=\"labels\">\n                    <li>Downloads</li>\n                    <li>${downloads}</li>\n                </ul>\n            </div>\n        </a>\n      </li>`\n    )\n    .join('');\n\n  loadSimpleLitebox(cartItem);\n}\n\nfunction loadSimpleLitebox(cartItem) {\n  const gallery = document.querySelector('ul.images-div');\n\n  gallery.insertAdjacentHTML('beforeend', cartItem);\n\n\n  if (galleryLightbox) {\n    galleryLightbox.refresh();\n  } else {\n    galleryLightbox = new SimpleLightbox('.images-div a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  }\n}\n\nexport { createCardsMarkup };","import { getImg } from './js/pixabay-api';\nimport { createCardsMarkup } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst fetchUsersBtn = document.querySelector('button[type=submit]');\nconst loadMoreBtn = document.querySelector('.js-load-more');\nconst imgs = document.querySelector('.images-div');\nconst loaderClass = document.querySelector('.loaderClass');\n\nlet page = 1;\nlet searchValue = '';\nlet cardHeight = 0;\n\n\nfetchUsersBtn.addEventListener('click', handleSearch);\nloadMoreBtn.addEventListener('click', handleLoadMore);\n\nasync function handleSearch(evt) {\n  evt.preventDefault();\n  let searchInput = document.querySelector('input[name=\"search\"]');\n  searchValue = searchInput.value.trim();\n\n  if (!searchValue) {\n    iziToast.show({\n      title: '❌',\n      message: 'Please enter a search query!',\n      backgroundColor: '#ef4040',\n      messageColor: 'white',\n    });\n    return;\n  }\n\n  imgs.innerHTML = '';\n  loaderClass.style.display = 'flex';\n\ntry {\n    const data = await getImg(searchValue);\n\n    if (data.totalHits === 0) {\n      iziToast.show({\n        title: '❌',\n        message: 'No images found for the query.',\n        backgroundColor: '#ef4040',\n        messageColor: 'white',\n      });\n      return;\n    }\n\n    page = 1;\n  createCardsMarkup(data.hits);\n\n const firstCard = imgs.querySelector('.gallery-card');\n    if (firstCard) {\n      cardHeight = firstCard.getBoundingClientRect().height;\n  }\n  \n    if (data.totalHits > 15) {\n      loadMoreBtn.classList.remove('is-hidden');\n    } else {\n      loadMoreBtn.classList.add('is-hidden');\n    }\n} catch (error) {\n   loadMoreBtn.classList.add('is-hidden');\n    iziToast.show({\n      title: '❌',\n      message: `${error.message}`,\n      backgroundColor: '#ef4040',\n      messageColor: 'white',\n    });\n \n  } finally {\n    loaderClass.style.display = 'none';\n  }\n\n  searchInput.value = '';\n}\n\nasync function handleLoadMore() {\n  page += 1;\n  loaderClass.style.display = 'block';\n\n  try {\n    const data = await getImg(searchValue, page);\n\n    if (data.hits && data.hits.length > 0) {\n      createCardsMarkup(data.hits);\n    }\n\n    if (cardHeight > 0) {\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n    }\n\n    if (page * 15 >= data.totalHits) {\n      loadMoreBtn.classList.add('is-hidden');\n      iziToast.show({\n      message: `We're sorry, but you've reached the end of search results.`,\n      backgroundColor: '#CCCCCC',\n      messageColor: 'white',\n    });\n    }\n  } catch (error) {\n    iziToast.show({\n      title: '❌',\n      message: `${error.message}`,\n      backgroundColor: '#ef4040',\n      messageColor: 'white',\n    });\n  } finally {\n    loaderClass.style.display = 'none';\n  }\n}\n"],"names":["API_KEY","getImg","searchValue","page","searchParams","url","res","axios","error","galleryLightbox","createCardsMarkup","cards","cartItem","tags","webformatURL","largeImageURL","likes","views","comments","downloads","loadSimpleLitebox","SimpleLightbox","fetchUsersBtn","loadMoreBtn","imgs","loaderClass","cardHeight","handleSearch","handleLoadMore","evt","searchInput","iziToast","data","firstCard"],"mappings":"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"}